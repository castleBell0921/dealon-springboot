<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>WebSocket ì±„íŒ… í…ŒìŠ¤íŠ¸</title>
</head>
<body>
  <h2>ì±„íŒ… í…ŒìŠ¤íŠ¸</h2>
  <input id="chatNo" value="1">
  <input id="senderNo" value="101">
  <input id="msg" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
  <button onclick="sendMsg()">ì „ì†¡</button>

  <pre id="log"></pre>

  <script>
    const socket = new WebSocket("ws://localhost:9090/ws/chat");

    socket.onopen = () => log("âœ… WebSocket ì—°ê²°ë¨");
    socket.onmessage = (e) => log("ğŸ“© " + e.data);
    socket.onclose = () => log("âŒ ì—°ê²° ì¢…ë£Œ");

    function sendMsg() {
      const msg = {
        chatNo: document.getElementById("chatNo").value,
        senderNo: document.getElementById("senderNo").value,
        message: document.getElementById("msg").value
      };
      socket.send(JSON.stringify(msg));
    }

    function log(text) {
      document.getElementById("log").textContent += text + "\n";
    }
  </script>
</body>
</html>
